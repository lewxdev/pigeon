(this.webpackJsonppigeon=this.webpackJsonppigeon||[]).push([[0],{203:function(e,t,n){},204:function(e,t,n){e.exports=n.p+"static/media/delete.cf1c0d66.svg"},205:function(e,t,n){e.exports=n.p+"static/media/heart.7746f5e4.svg"},206:function(e,t,n){e.exports=n.p+"static/media/heart_filled.0f0a056e.svg"},207:function(e,t,n){e.exports=n.p+"static/media/home.6598f834.svg"},208:function(e,t,n){e.exports=n.p+"static/media/loading.1dfa883d.svg"},209:function(e,t,n){e.exports=n.p+"static/media/logout.1c50a833.svg"},210:function(e,t,n){e.exports=n.p+"static/media/ori_bird.b1ecdaea.svg"},211:function(e,t,n){e.exports=n.p+"static/media/settings.5a6ee94f.svg"},212:function(e,t,n){e.exports=n.p+"static/media/user.a70d8f6d.svg"},213:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAxIOOzICSoVCAAAC2ElEQVRIx53VT2wUdRQH8A9NYbtCS9GGFm1JlxKC0sSNEeMFE7jRcvFgYqJBUePBkNJISxMSPGAgLcSzSPVEwlEuQKIHonaLf2LbWBICpNBu2wgFDAvdSrdW6gGoMzuzavzOZd573/fv9+b9Zok4VNphq7RG1cgZ9YtzzpiOUpdENGt8ZKekQd+56g6e1GSLF9x3Uo8R/4CEg/Ky2jREbA3ajJvTLVHKvc55OZ0qSiZI2ienX22csdm4yzaEdM9qsd3GkG6jy7Kao9nHfWPVolxhrzELj54xHwYKX+Vb2XAVFc67FHBvMCivx2bLLbfZEXkD6gMhrugPnsVBuUDx1S4Z1hiqMOWCi1YGGrnr8N+Dy+sIkHtNqosZ76+OBeQuBesevn4qGzj5BvPejJ3BTn8E2kia8BlUmtEWoO2Wsyw2QMJdHwTkdnkryuyQdCo0uiFzsQEKhjwXkL/0hJYyWw2YCKir3FMK9wLHyLgh28qkZUKkKc+UDFDvRkjOSJdJFa1Hv7TVse51ni9KNiJVpkoupPzKbzpjA+xz09chzR0rKXiriPi+edsj7q3mvVuke9sst+yNkL9QsFv5olxuj4LjEV6HqXLXYnb/PeM+0e6Ui9jkVfU+dijCW+saxw3EdtzkqGHTpg078vijLcKgY7xuXo3/gxp/eq3cGQW7HC0yNnrZWqvV4LYpE76XLeK843dnodeopY+US7U6YdKCgjE/OO20H42Zs2DSCa0B5ujDZWK9OV14Wo9bHuiz3xbJULakV+yX8cBNPdagy6zUY3O3GZ+bdd2BooukGCkHXDer10xwKgn9FnSUvrBDSOi0oC+89LWy+lT+pwBVMsai+9Isa1jTv7qvd0HWpjhTrYxpbYvnHMUy7fL6SmwrEg4rGLHHUxFbjXZXFRwK9x79ua7T5Q0VfvKzK3KotsGLXnLfSd1Gw/RoAFihxTZpqcXf+5BzzpqJUv8CXMDTx8Mpa/AAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDMtMThUMTQ6NTk6NTArMDA6MDDDa7ZbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTAzLTE4VDE0OjU5OjUwKzAwOjAwsjYO5wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},269:function(e,t,n){e.exports=n(463)},298:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},400:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),c=n.n(o),s=n(22),i=n(121),u=n(15),l=n(233),p=n(17),m=n(16),f=n(18),d=n(35),g=n(113),h=Object(g.connectedRouterRedirect)({redirectPath:"/login",authenticatedSelector:function(e){return e.auth&&e.auth.login&&e.auth.login.result&&void 0!==e.auth.login.result.token},wrapperDisplayName:"UserIsAuthenticated"}),b=Object(g.connectedRouterRedirect)({redirectPath:function(e,t){return"/user/".concat(e.auth&&e.auth.login&&e.auth.login.result&&e.auth.login.result.username)},allowRedirectBack:!1,authenticatedSelector:function(e){return e.auth&&e.auth.login&&null===e.auth.login.result},wrapperDisplayName:"UserIsNotAuthenticated"}),O=n(23),j=n(39),y=n(474),v=n(473),E=n(32),A=n(57),S=n(29),D="https://kwitter-api.herokuapp.com",P={"Content-Type":"application/json",Accept:"application/json"},w={result:null,loading:!1,error:null},C=function(e){return e.ok?e.json():e.json().then((function(e){throw e}))},U=function(e){return{START:Object(A.b)(e+"/start"),SUCCESS:Object(A.b)(e+"/success"),FAIL:Object(A.b)(e+"/fail")}},k=function(e){var t,n=e.START,a=e.SUCCESS,r=e.FAIL;return t={},Object(O.a)(t,n,(function(e,t){e.loading=!0,e.error=null})),Object(O.a)(t,a,(function(e,t){e.loading=!1,e.result=t.payload})),Object(O.a)(t,r,(function(e,t){e.loading=!1,e.error=t.payload})),t};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=D+"/auth",T=U("login"),F=U("logout"),R={login:Object(A.c)(function(e,t){var n=JSON.parse(localStorage.getItem(e));return n?Object.keys(n).every((function(e){return void 0!==t[e]}))&&Object.keys(t).every((function(e){return void 0!==n[e]}))?n:void 0:t}("login",w),I({},k(T),Object(O.a)({},F.SUCCESS.toString(),(function(e,t){return w})))),logout:Object(A.c)(w,I({},k(F)))};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=D+"/likes",z=U("like"),G=U("unlike"),K={like:Object(A.c)(w,M({},k(z))),unlike:Object(A.c)(w,M({},k(G)))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=D+"/messages",q=U("feed"),Y=U("create"),Z=U("getMessage"),X=U("deleteMessage"),Q=function(e){return function(t,n){t(X.START());var a=n().auth.login.result.token;return fetch("".concat(V,"/").concat(e),{method:"DELETE",headers:H({Authorization:"Bearer "+a},P)}).then(C).then((function(e){return t(X.SUCCESS(e))})).catch((function(e){return Promise.reject(t(X.FAIL(e)))}))}},W={feed:Object(A.c)(w,H({},k(q))),create:Object(A.c)(w,H({},k(Y))),deleteMessage:Object(A.c)(w,H({},k(X)))};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=D+"/users",te=U("getUserList"),ne=U("signup"),ae=U("getUser"),re=function(e){return function(t){return t(ae.START()),fetch("".concat(ee,"/").concat(e),{method:"GET",headers:P}).then(C).then((function(e){return t(ae.SUCCESS(e))})).catch((function(e){return Promise.reject(t(ae.FAIL(e)))}))}},oe=U("updateUser"),ce=U("deleteUser"),se=U("getUserAvatar"),ie=U("setUserAvatar"),ue={getUserList:Object(A.c)(w,$({},k(te))),signup:Object(A.c)(w,$({},k(ne))),getUser:Object(A.c)(w,$({},k(ae))),updateUser:Object(A.c)(w,$({},k(oe))),getUserAvatar:Object(A.c)(w,$({},k(se))),setUserAvatar:Object(A.c)(w,$({},k(ie))),deleteUser:Object(A.c)(w,$({},k(ce)))},le=Object(E.a)({basename:"/pigeon"}),pe=Object(A.a)({reducer:{router:Object(i.b)(le),auth:Object(S.combineReducers)(R),likes:Object(S.combineReducers)(K),messages:Object(S.combineReducers)(W),users:Object(S.combineReducers)(ue)},preloadedState:{},devTools:!1});pe.subscribe((function(){localStorage.setItem("login",JSON.stringify(pe.getState().auth.login))}));n(298);var me=function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={username:"",password:""},n.handleLogin=function(e){e.preventDefault(),n.props.login(n.state)},n.handleChange=function(e){n.setState(Object(O.a)({},e.target.name,e.target.value))},n.render=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{className:"LoginForm",onSubmit:n.handleLogin},r.a.createElement(y.a.Field,{className:"LoginForm_input-fields"},r.a.createElement(y.a.Input,{required:!0,name:"username",placeholder:"Username",onChange:n.handleChange}),r.a.createElement(y.a.Input,{required:!0,name:"password",placeholder:"Password",type:"password",onChange:n.handleChange})),r.a.createElement(y.a.Field,{className:"LoginForm_submit-options"},r.a.createElement(y.a.Button,{basic:!0,content:"Login",type:"submit",disabled:n.props.loading}),r.a.createElement(j.a,{to:"/signup"},r.a.createElement(y.a.Button,{basic:!0,color:"red",content:"Signup",disabled:n.props.loading})))),n.props.loading&&r.a.createElement(v.a,{active:!0,inline:"centered"}),n.props.error&&r.a.createElement("p",{style:{color:"red"}},n.props.error.message))},n}return Object(f.a)(t,e),t}(a.Component),fe=Object(s.connect)((function(e){return{result:e.auth.login.result,loading:e.auth.login.loading,error:e.auth.login.error}}),{login:function(e){return function(t){return t(T.START()),fetch(N+"/login",{method:"POST",headers:P,body:JSON.stringify(e)}).then(C).then((function(e){return t(T.SUCCESS(e))})).catch((function(e){return Promise.reject(t(T.FAIL(e)))}))}}})(me);n(397);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={redirect:!1,userData:{displayName:"",username:"",password:""}},n.handleSignup=function(e){e.preventDefault(),n.props.signup(n.state.userData).then((function(e){return n.setState({redirect:!0})}))},n.handleChange=function(e){n.setState({userData:ge({},n.state.userData,Object(O.a)({},e.target.name,e.target.value))})},n.handleErrors=function(e){if("username must be unique"===e)return"Username already exists";if(e.includes("String too short.")){var t="should be at least 3 characters";if(e.includes("displayName"))return"Display Name ".concat(t);if(e.includes("username"))return"Username ".concat(t);if(e.includes("password"))return"Password ".concat(t)}else if(e.includes("String too long.")){var n="can't be more than 20 characters";if(e.includes("displayName"))return"Display Name ".concat(n);if(e.includes("username"))return"Username ".concat(n);if(e.includes("password"))return"Password ".concat(n)}},n.render=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{className:"SignupForm",onSubmit:n.handleSignup},r.a.createElement(y.a.Field,{className:"SignupForm_input-fields"},r.a.createElement(y.a.Input,{required:!0,name:"displayName",placeholder:"Display Name",onChange:n.handleChange}),r.a.createElement(y.a.Input,{required:!0,name:"username",placeholder:"Username",onChange:n.handleChange}),r.a.createElement(y.a.Input,{required:!0,name:"password",placeholder:"Password",type:"password",onChange:n.handleChange})),r.a.createElement(y.a.Field,{className:"SignupForm_submit-options"},r.a.createElement(j.a,{to:"/"},r.a.createElement(y.a.Button,{basic:!0,content:"Back"})),r.a.createElement(y.a.Button,{basic:!0,color:"red",content:"Signup",type:"submit",disabled:n.props.loading}))),n.props.loading&&r.a.createElement(v.a,{active:!0,inline:"centered"}),n.props.error&&r.a.createElement("p",{style:{color:"red"}},n.handleErrors(n.props.error.message)),n.state.redirect&&r.a.createElement(d.a,{to:"/"}))},n}return Object(f.a)(t,e),t}(a.Component),be=Object(s.connect)((function(e){return{result:e.users.signup.result,loading:e.users.signup.loading,error:e.users.signup.error}}),{signup:function(e){return function(t){return t(ne.START()),fetch(ee,{method:"POST",headers:P,body:JSON.stringify(e)}).then(C).then((function(e){return t(ne.SUCCESS(e))})).catch((function(e){return Promise.reject(t(ne.FAIL(e)))}))}}})(he),Oe=n(472),je=n(65),ye=(n(203),n(398),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={postContent:""},n.handleChange=function(e){n.state.postContent.length<255?n.setState({postContent:e.target.value}):n.setState((function(e){return e}))},n.handleSubmit=function(e){e.preventDefault(),n.props.create(n.state.postContent).then((function(e){return console.log(e.payload.message)})).then(n.setState({postContent:""}))},n.render=function(){return r.a.createElement(y.a,{className:"Create Post_wrapper",onSubmit:n.handleSubmit},r.a.createElement(Oe.a,{fluid:!0,transparent:!0,placeholder:"What's on your mind?",onChange:n.handleChange,className:"Post",value:n.state.postContent,icon:r.a.createElement(je.a,{className:"Create Icon",name:"angle double right",circular:!0})}))},n}return Object(f.a)(t,e),t}(a.Component)),ve=Object(s.connect)((function(e){return{result:e.messages.create.result,loading:e.messages.create.loading,error:e.messages.create.error}}),{create:function(e){return function(t,n){t(Y.START());var a=n().auth.login.result.token;return fetch(V,{method:"POST",headers:H({Authorization:"Bearer "+a},P),body:JSON.stringify({text:e})}).then(C).then((function(e){return t(Y.SUCCESS(e))})).catch((function(e){return Promise.reject(t(Y.FAIL(e)))}))}}})(ye),Ee=n(477);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){n.updateFeed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;n.props.feed(n.props.username,t,t+t*n.state.listData.page).then((function(e){n.setState({listData:Se({},n.state.listData,{totalPages:Math.ceil(e.payload.count/e.payload.messages.length),lastPostId:e.payload.messages[0].id})}),n.setState({messages:e.payload.messages})}))},n.updateFeed(),n.componentIntervalUpdate=setInterval(n.updateFeed,1e3),n.handleScroll=function(e){console.log(n.feed.current)},window.addEventListener("scroll",n.handleScroll)},n.componentWillUnmount=function(){clearInterval(n.componentIntervalUpdate)},n.handleDeletePost=function(e){window.confirm("Are you sure you want to delete this post?")&&(n.props.deleteMessage(e),n.setState({messages:n.state.messages.filter((function(t){return t.id!==e}))}))},n.render=function(){return r.a.createElement("div",{ref:n.feed},r.a.createElement(Ee.a,null,n.state.messages.map((function(e){return r.a.createElement(_e,{key:e.id,handleDeletePost:function(){return n.handleDeletePost(e.id)},initialMessageData:e})}))))},n.feed=r.a.createRef(),n.state={messages:[],listData:{lastPostId:null,totalPages:null,page:0}},n}return Object(f.a)(t,e),t}(a.Component),Pe=Object(s.connect)((function(e){return{result:e.messages.feed.result}}),{feed:function(e,t,n){return function(a){a(q.START());var r={username:e,limit:t,offset:n},o=V;for(var c in r)r[c]&&(o+="?".concat(c,"=").concat(r[c]));return fetch(o,{method:"GET",headers:P}).then(C).then((function(e){return a(q.SUCCESS(e))})).catch((function(e){return Promise.reject(a(q.FAIL(e)))}))}},deleteMessage:Q})(De),we=n(479),Ce=n(257),Ue=n(204),ke=n.n(Ue),Le=n(205),Ie=n.n(Le),Ne=n(206),Te=n.n(Ne),Fe=n(207),Re=n.n(Fe),xe=(n(208),n(209)),Me=n.n(xe),Be=n(210),ze=n.n(Be),Ge=(n(211),n(212)),Ke=n.n(Ge),Je=n(213),He=n.n(Je),Ve=(n(400),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={activeItem:"user"},n.handleSelect=function(e){return n.setState({activeItem:e.target.name})},n.handleLogout=function(e){e.preventDefault(),n.props.logout()},n.render=function(){return r.a.createElement(we.a,{icon:!0,pointing:!0,secondary:!0,vertical:!0,className:"NavBar",color:"grey"},r.a.createElement(j.a,{to:"/you",name:"user",onClick:n.handleSelect},r.a.createElement(we.a.Item,{active:"user"===n.state.activeItem,style:{color:"#767676"}},r.a.createElement(Ce.a,{src:Ke.a}))),r.a.createElement(j.a,{to:"/",name:"home",onClick:n.handleSelect},r.a.createElement(we.a.Item,{active:"home"===n.state.activeItem,style:{color:"#767676"}},r.a.createElement(Ce.a,{src:Re.a}))),r.a.createElement(j.a,{to:"/",onClick:n.handleLogout},r.a.createElement(we.a.Item,{style:{color:"#767676"}},r.a.createElement(Ce.a,{src:Me.a}))))},n}return Object(f.a)(t,e),t}(a.Component)),qe=Object(s.connect)((function(e){return{result:e.auth.logout.result,loading:e.auth.logout.loading,error:e.auth.logout.error}}),{logout:function(){return function(e,t){e(F.START());var n=t().auth.login.result.token;return fetch(N+"/logout",{method:"GET",headers:I({Authorization:"Bearer "+n},P)}).then(C).then((function(t){return e(F.SUCCESS(t))})).catch((function(t){return Promise.reject(e(F.FAIL(t)))}))}}})(Ve),Ye=n(475),Ze=(a.Component,n(258));function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={userData:{},messageData:n.props.initialMessageData},n.componentDidMount=function(){n.props.getUser(n.state.messageData.username).then((function(e){return n.setState({userData:e.payload.user})})),n.updateData=function(){n.props.getMessage(n.state.messageData.id).then((function(e){n.setState({messageData:Qe({relativeDate:n.handleRelativeDate(n.state.messageData.createdAt),likes:[e.payload.likes]},n.state.messageData)})}))},n.updateData(),n.componentIntervalUpdate=setInterval(n.updateData,6e4)},n.componentWillUnmount=function(){clearInterval(n.componentIntervalUpdate)},n.handleRelativeDate=function(e){var t=new Date-new Date(e),n=Math.floor(t/6e4),a=Math.floor(t/36e5),r=Math.floor(t/864e5),o=Math.floor(t/6048e5);return t<6e4?"a few seconds ago":t<36e5?"".concat(n," minute").concat(n>1?"s":""," ago"):t<864e5?"".concat(a," hour").concat(a>1?"s":""," ago"):t<6048e5?"".concat(r," day").concat(r>1?"s":""," ago"):"".concat(o," week").concat(o>1?"s":""," ago")},n.currentUserLikesPost=function(){if(n.state.messageData.likes.some((function(e){return e.username===n.props.currentUser})))return!0},n.toggleLike=function(){var e=n.currentUserLikesPost()?"unlike":"like",t=n.currentUserLikesPost()?n.state.messageData.likes.find((function(e){return e.username===n.props.currentUser})).id:n.state.messageData.id;n.props[e](t).then((function(t){"like"===e?n.setState({messageData:Qe({},n.state.messageData,{likes:[].concat(Object(Ze.a)(n.state.messageData.likes),[t.payload.like])})}):n.setState({messageData:Qe({},n.state.messageData,{likes:n.state.messageData.likes.filter((function(e){return e.id!==t.payload.id}))})})}))},n.render=function(){return r.a.createElement(Ee.a,{className:"Post_wrapper"},r.a.createElement(Ee.a.Event,{className:"Post"},r.a.createElement(Ee.a.Label,{className:"Post_user-picture"},r.a.createElement(Ce.a,{avatar:!0,alt:"@".concat(n.props.username,"'s Avatar"),src:n.state.userData.pictureLocation?D+n.state.userData.pictureLocation:He.a})),r.a.createElement(Ee.a.Content,null,r.a.createElement(Ee.a.Summary,null,r.a.createElement(Ee.a.User,{href:"/user/".concat(n.state.messageData.username)},r.a.createElement("div",null,n.state.userData.displayName),r.a.createElement("div",null,"@",n.state.messageData.username)),r.a.createElement(Ee.a.Date,{className:"Post_timestamp",content:n.state.messageData.relativeDate})),r.a.createElement(Ee.a.Extra,{text:!0,children:n.state.messageData.text}),r.a.createElement("div",{className:"Post_meta-content"},r.a.createElement(Ee.a.Like,{className:"Post_like",onClick:n.toggleLike},r.a.createElement(Ce.a,{src:n.currentUserLikesPost()?Te.a:Ie.a}),n.state.messageData.likes.length),n.state.messageData.username===n.props.currentUser&&r.a.createElement(Ee.a.Label,{className:"Post_delete",onClick:n.props.handleDeletePost},r.a.createElement(Ce.a,{src:ke.a}))))))},n}return Object(f.a)(t,e),t}(a.Component),_e=Object(s.connect)((function(e){return{currentUser:e.auth.login.result.username}}),{getUser:re,getMessage:function(e){return function(t,n){return t(Z.START()),fetch("".concat(V,"/").concat(e),{method:"GET",headers:P}).then(C).then((function(e){return t(Z.SUCCESS(e))})).catch((function(e){return Promise.reject(t(Z.FAIL(e)))}))}},deleteMessage:Q,like:function(e){return function(t,n){t(z.START());var a=n().auth.login.result.token;return fetch(B,{method:"POST",headers:M({Authorization:"Bearer "+a},P),body:JSON.stringify({messageId:e})}).then(C).then((function(e){return t(z.SUCCESS(e))})).catch((function(e){return Promise.reject(t(z.FAIL(e)))}))}},unlike:function(e){return function(t,n){t(G.START());var a=n().auth.login.result.token;return fetch("".concat(B,"/").concat(e),{method:"DELETE",headers:M({Authorization:"Bearer "+a},P)}).then(C).then((function(e){return t(G.SUCCESS(e))})).catch((function(e){return Promise.reject(t(G.FAIL(e)))}))}}})(We),$e=n(480),et=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement($e.a,{as:"h1",size:"huge"},r.a.createElement(Ce.a,{src:ze.a}),r.a.createElement($e.a.Content,null,"Pigeon",r.a.createElement($e.a.Subheader,{content:"Inclusive global micro-blogging"})))},n}return Object(f.a)(t,e),t}(a.Component),tt=h(function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){},n.componentWillUnmount=function(){},n.render=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(qe,null),r.a.createElement(Pe,null))},n}return Object(f.a)(t,e),t}(a.Component)),nt=(n(459),b(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("section",{className:"Login_wrapper"},r.a.createElement(et,null),r.a.createElement(fe,null))},n}return Object(f.a)(t,e),t}(a.Component))),at=b(function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement(a.Fragment,null,r.a.createElement("p",null,"Page not found for ",n.props.location.pathname),r.a.createElement(j.a,{to:"/"},"Go Home"))},n}return Object(f.a)(t,e),t}(a.Component)),rt=(n(460),b(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("section",{className:"Signup_wrapper"},r.a.createElement(et,null),r.a.createElement(be,null))},n}return Object(f.a)(t,e),t}(a.Component))),ot=n(478),ct=(n(461),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={},n.componentDidMount=function(){n.props.getUser(n.props.username).then((function(e){return n.setState(e.payload.user)}))},n.render=function(){return r.a.createElement("div",{className:"Profile_wrapper"},r.a.createElement(ot.a,{fluid:!0,className:"Profile_Card"},r.a.createElement(ot.a.Content,null,r.a.createElement(Ce.a,{avatar:!0,size:"big",floated:"left",src:n.state.pictureLocation?D+n.state.pictureLocation:He.a}),r.a.createElement(ot.a.Header,{children:n.state.displayName}),r.a.createElement(ot.a.Meta,{children:"@".concat(n.state.username)}),r.a.createElement(ot.a.Description,{children:n.state.about}))))},n}return Object(f.a)(t,e),t}(a.Component)),st=Object(s.connect)((function(){return{}}),{getUser:re})(ct),it=function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(qe,null),r.a.createElement(st,{username:n.props.navigatedUser}),n.props.currentUser===n.props.navigatedUser&&r.a.createElement(ve,null),r.a.createElement(Pe,{username:n.props.navigatedUser}))},n}return Object(f.a)(t,e),t}(a.Component),ut=Object(s.connect)((function(e){return{currentUser:e.auth&&e.auth.login&&e.auth.login.result&&e.auth.login.result.username,navigatedUser:e.router.location.pathname.slice(e.router.location.pathname.lastIndexOf("/")+1)}}))(h(it)),lt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:tt}),r.a.createElement(d.b,{exact:!0,path:"/login",component:nt}),r.a.createElement(d.b,{exact:!0,path:"/signup",component:rt}),r.a.createElement(d.b,{exact:!0,path:"/user/:username",component:ut}),r.a.createElement(d.b,{path:"*",component:at}))}}]),t}(a.Component);n(462);c.a.render(r.a.createElement(s.Provider,{store:pe},r.a.createElement(i.a,{history:le},r.a.createElement(lt,null))),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.5625dfa0.chunk.js.map